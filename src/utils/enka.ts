import axios from 'axios';
import { ok, err, Result } from 'neverthrow';

const cardNameMap: Record<string, string> = {
	'210003': 'Ambor',
	'210004': 'Klee',
	'210005': 'Diluc',
	'210006': 'Razor',
	'210007': 'Venti',
	'210008': 'Qin',
	'210009': 'Barbara',
	'210010': 'Kaeya',
	'210011': 'Lisa',
	'210012': 'Sucrose',
	'210013': 'Fischl',
	'210014': 'Noel',
	'210015': 'Mona',
	'210016': 'Bennett',
	'210017': 'Xiangling',
	'210018': 'Xingqiu',
	'210019': 'Qiqi',
	'210020': 'Keqing',
	'210021': 'Csxy1',
	'210022': 'Mxsy',
	'210023': 'Yxzl',
	'210024': 'Md',
	'210025': 'Ly',
	'210026': 'Yszj',
	'210027': 'Sss',
	'210028': 'Tzz1',
	'210029': 'Sj1',
	'210030': 'Olah1',
	'210031': 'Zdg1',
	'210032': 'Lyws1',
	'210033': 'Ysxf1',
	'210038': 'Ningguang',
	'210039': 'Beidou',
	'210040': 'Chongyun',
	'210041': 'Tzz2',
	'210043': 'Diona',
	'210044': 'Zhongli',
	'210045': 'Xinyan',
	'210046': 'Tartaglia',
	'210047': 'Md2',
	'210048': 'Md1',
	'210049': 'Ly1',
	'210050': 'Ly2',
	'210051': 'Tzz3',
	'210052': 'Xssdlk',
	'210053': 'Ganyu',
	'210054': 'Albedo',
	'210056': 'ElderTree',
	'210057': 'EffigyChallenge',
	'210058': 'Xiao',
	'210059': 'Hutao',
	'210061': 'LanternRite',
	'210062': 'TheatreMechanicus',
	'210063': 'Rosaria',
	'210065': 'RedandWhite',
	'210066': 'Razer',
	'210067': 'ChannellerSlab',
	'210068': 'HideandSeek',
	'210069': 'Feiyan',
	'210070': 'Eula',
	'210072': 'Homeworld',
	'210073': 'Kazuha',
	'210075': 'Homeworld1',
	'210076': 'Google',
	'210077': 'BounceConjuringChallenge',
	'210078': 'EffigyChallenge02',
	'210079': 'Oraionokami',
	'210081': 'Ayaka',
	'210082': 'Yoimiya',
	'210083': 'Sayu',
	'210084': 'Dq1',
	'210085': 'Dq2',
	'210086': 'Ysxf2',
	'210087': 'Csxy2',
	'210088': 'Tzz4',
	'210089': 'Homeworld2',
	'210090': 'Daoqi1',
	'210091': 'TheatreMechanicus2',
	'210092': 'Shougun',
	'210093': 'Kokomi',
	'210094': 'Sara',
	'210095': 'Aloy',
	'210097': 'Daoqi2',
	'210098': 'Fishing',
	'210099': 'Concert',
	'210100': 'Sumo',
	'210101': 'Tohma',
	'210103': 'Daoqi3',
	'210104': 'Gorou',
	'210105': 'Itto',
	'210107': 'Shenhe',
	'210108': 'Yunjin',
	'210109': 'Daoqi4',
	'210111': 'Bartender',
	'210112': 'Yae1',
	'210114': 'Ayato',
	'210115': 'LuminanceStone',
	'210116': 'Tzz5',
	'210117': 'Cenyan1',
	'210119': 'Yelan',
	'210120': 'Shinobu',
	'210122': 'Heizo',
	'210124': 'Tighnari',
	'210125': 'Collei',
	'210126': 'Dori',
	'210128': 'Csxy3',
	'210129': 'Ysxf3',
	'210130': 'Xm1',
	'210131': 'Xumi1',
	'210132': 'Xumi2',
	'210134': 'Cyno',
	'210135': 'Candace',
	'210136': 'Nilou',
	'210137': 'Yszj2',
	'210138': 'Xm2',
	'210139': 'Tzz6',
	'210140': 'Nahida',
	'210141': 'Layla',
	'210143': 'Wanderer',
	'210144': 'Faruzan',
	'210145': 'Gcg1',
	'210147': 'Alhatham',
	'210148': 'Yaoyao',
	'210149': 'Cadillac',
	'210151': 'Xm3',
	'210152': 'Dehya',
	'210153': 'Mika',
	'210155': 'Baizhuer',
	'210156': 'Kaveh',
	'210157': 'Xm4',
	'210158': 'Tzz7',
	'210159': 'Vasara',
	'210160': 'OfferingPari',
	'210162': 'Kirara',
	'210165': 'Liney',
	'210166': 'Linette',
	'210167': 'Freminet',
	'210168': 'FD1',
	'210169': 'Ysxf4',
	'210170': 'Csxy4',
	'210171': 'Fontaine1',
	'210172': 'Fontaine2',
	'210174': 'Neuvillette',
	'210175': 'Wriothesley',
	'210177': 'Guqin',
	'210178': 'Tzz8',
	'210179': 'FD2',
	'210180': 'Furina',
	'210181': 'Charlotte',
	'210182': 'FD3',
	'210184': 'Navia',
	'210185': 'Chevreuse',
	'210187': 'Liuyun',
	'210188': 'Gaming',
	'210189': 'Chenyu1',
	'210190': 'OfferingSilong',
	'210192': 'OST4',
	'210193': 'Chiori',
	'210195': 'Arlecchino',
	'210196': 'Deep',
	'210197': 'Tzz9',
	'210198': 'WishingPond',
	'210199': 'GreatFestivalV2',
	'210200': 'Clorinde',
	'210201': 'Sigewinne',
	'210202': 'Sethos',
	'210203': 'RoleCombat'
};

export const queryUserInfoEnka = async (uid: string): Promise<Result<PlayerInfo, Error>> => {
	const url = `https://enka.network/api/uid/${uid}/?info`;
	try {
		const response = await axios.get<PlayerInfo>(url);
		if (response.status !== 200) {
			return err(new Error(`Failed to fetch user info: ${response.statusText}`));
		}
		return ok(response.data);
	} catch (error) {
		return err(new Error('Failed to fetch user info'));
	}
};

export const mapCardName = (cardId: number): string => {
	return cardNameMap[cardId.toString()] || cardId.toString();
};
